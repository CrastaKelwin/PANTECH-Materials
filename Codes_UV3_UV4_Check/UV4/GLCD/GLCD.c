#include <LPC214X.H>

#define CS2 (1<<10)				// P0.10 to P0.15 as Control Lines
#define CS1 (1<<11)
#define RS  (1<<12)
#define RW  (1<<13)
#define EN	(1<<14)
#define RST	(1<<15)

#define D7	(1<<23)				// P0.16 to P0.23 as Data Lines
#define D6	(1<<22)
#define D5	(1<<21)
#define D4	(1<<20)
#define D3	(1<<19)
#define D2	(1<<18)
#define D1	(1<<17)
#define D0	(1<<16)

void GLCD_Init (void);
void GLCD_Page (char);
void GLCD_Cmd  (char);
void GLCD_Data (char);
void GLCD_Draw (char *Base);
void Delay(void);

char i;
char CMD[] = {0x3E,0xC0,0xB8,0x40,0x3F};

// ------------------------------------------------------  
// GLCD Picture name: pantech.bmp            
// GLCD Model: KS0108 128x64            
// ------------------------------------------------------  

char PAN_LOGO[1024] = {
  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,192,240, 16,176, 48, 32,176,112, 32,128,  0,  0,  0,  0,  0, 
 128,128,128,128,128,128,128,240, 56, 24,248,  8,200,  8, 48,  0, 
 192,128,128,128,128,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,192,192, 32, 32, 32, 16, 16, 16,  0,  8, 14, 
  31, 23, 33, 64,129,  2,  4, 15, 16,  8,  7,  1,123,  3,  3,  5, 
 121,225, 65, 64, 64, 64, 64, 65, 65,194,194,197, 67, 72, 82,113, 
  33, 63,188,128,  1, 31, 60, 32, 64, 64,128,128,128,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
 128,128, 64, 32,  0, 16,  0,  8,  8,  8,  8,  8,  8,200, 24,  8, 
   8,  8,104, 24, 24, 24, 48, 96,192,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,192,254,127,  0,  1,  0,  2,  4,  8, 16, 32, 64,128, 
 128, 64, 64, 32, 32, 17, 26, 12, 28, 36,196,  2,  3,  0,  0,224, 
  16,  8,196, 50, 40,  5,  5,194, 38, 64,160, 17,185,145,145,153, 
 129,146,148, 48,114,194,192,157,140, 26, 36, 68,  9,145,103,140, 
  56, 96,192,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 64, 48, 24,  4,194, 
  33, 16,  0,  4,  4,128,194, 64,  0, 32,  0,  2, 66, 76, 64,  0, 
   0,  1, 14, 48,  0,  1, 32,124, 15,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  1,  3,  2,  4,  4,  6,  4,  8, 24, 48, 32, 64, 
 192,128,  0,  0,  0,  0,  0,  0,  0,  0,  0,  3,  4, 16, 64,135, 
   8, 32,  7, 76, 80,168, 32,  0, 64,  2,  5,130,133,136,136, 16, 
  16, 24,136,140,134,  5, 67, 98,  8,  0,  4,140, 64, 33, 16,  7, 
   0,  0,  1,  3, 14, 24, 48,192,128,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,224, 28,  7,  1,128,112, 12,  3,128, 
 128,  0,112, 12, 66, 65, 64, 64,128,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,  0,224, 
 192,208,129,218, 38,  4,  0, 16, 48, 32, 64,192,128,  0,  0,  1, 
   6,  8,112, 16, 32,  0,  0,  1, 16,144,146,146,144,144,128,128, 
 128,  0,  0, 66, 66, 74, 72, 72, 73, 72, 64,  0,  0, 32, 32, 36, 
  36, 36, 36,100, 68, 64, 64, 64,  1, 63,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,255,129,  0,  0,  0,  0,  1,  0,  0,  0, 
  15, 96,128,  0,  0, 30, 32,128,  0,  3, 22, 12,112,128,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,  8,  2,  0,128,202, 
  47, 25,  7,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  2,  2,  2, 
   4,  4,  4,  4,  4,  0,  2,  3,  3,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  3,  2,  4,  0,  8,  0, 16, 16, 16, 
 224,  0,192, 17,148, 24,  0, 16, 17,  2,  4,140,136, 15,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,128,128, 64,  0, 96, 32, 56, 24,  9,141, 36, 36,  0,  5,  1, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  2,  0,  0,  0,  0,  4,  2,  5,  8,  2,  4,  0,  8,  4,  8, 
   1,  3, 24,  5, 24, 20, 16, 28,  0, 22,  0,  8,  1,  9,  0,  8, 
   8,  7,  8,  1,  4,  0,  7,  2,  3,  1,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0 
};

int main()

{
	IO0DIR	=	0xFFFF00;
	GLCD_Init ();
	Delay();
	GLCD_Draw(PAN_LOGO);
	while(1);  	
}

void GLCD_Init(void)
{	
	IO0SET	= RST;
	Delay();
	IO0CLR	= RST;
	Delay();
	IO0SET	= RST;

	GLCD_Page(1);

		for(i=0;i<5;i++)
		{
			GLCD_Cmd(CMD[i]);
		}

	GLCD_Page(0);

		for(i=0;i<5;i++)
		{
			GLCD_Cmd(CMD[i]);
		}

}

void GLCD_Page(char Page)
{
	if (Page)
	{
		IOCLR0 = CS1; IOSET0 = CS2;
	}
	else
	{
		IOCLR0 = CS2; IOSET0 = CS1;
	}
}

void GLCD_Cmd (char c)
{

	if(c & 0x80) IOSET0 = D7; else IOCLR0 = D7;
	if(c & 0x40) IOSET0 = D6; else IOCLR0 = D6;
	if(c & 0x20) IOSET0 = D5; else IOCLR0 = D5;
	if(c & 0x10) IOSET0 = D4; else IOCLR0 = D4;
	if(c & 0x08) IOSET0 = D3; else IOCLR0 = D3;
	if(c & 0x04) IOSET0 = D2; else IOCLR0 = D2;
	if(c & 0x02) IOSET0 = D1; else IOCLR0 = D1;
	if(c & 0x01) IOSET0 = D0; else IOCLR0 = D0;

	IOCLR0	= RS; IOCLR0	= RW;
	IOSET0	= EN;
	Delay();
	IOCLR0	= EN;
}

void GLCD_Data (char c)
{
   	if(c & 0x80) IOSET0 = D7; else IOCLR0 = D7;
	if(c & 0x40) IOSET0 = D6; else IOCLR0 = D6;
	if(c & 0x20) IOSET0 = D5; else IOCLR0 = D5;
	if(c & 0x10) IOSET0 = D4; else IOCLR0 = D4;
	if(c & 0x08) IOSET0 = D3; else IOCLR0 = D3;
	if(c & 0x04) IOSET0 = D2; else IOCLR0 = D2;
	if(c & 0x02) IOSET0 = D1; else IOCLR0 = D1;
	if(c & 0x01) IOSET0 = D0; else IOCLR0 = D0;

	IOSET0	= RS; IOSET0	= EN;
	IOCLR0	= RW;
	Delay();
	IOCLR0		= EN;	
}

void GLCD_Draw (char *Base)
{
	int Page, Column;

	for (Page = 0; Page < 8 ; Page++)
	{
		GLCD_Page(1);
		GLCD_Cmd ((0xB8 | Page));
		GLCD_Cmd (0x40);

		for (Column = 0; Column < 128; Column++)
		{
			if (Column == 64)
			{
				GLCD_Page (0);
				GLCD_Cmd ((0xB8 | Page));
				GLCD_Cmd (0x40);
			}
		GLCD_Data (*Base++);
		Delay();


		}
	}		
}
void Delay()
{
	unsigned int i,j;
	for(i=0;i<25;i++)
		for(j=0;j<200;j++);
} 
